{% extends "base_admin.html" %}

{% block title %}{{ product.name }}{% endblock %}

{% block main %}
<div class="container my-4">
    <h1 class="mb-4">{{ product.name }}</h1>
    <div class="row mb-4">
        {% if product.image_main %}
            <div class="col-md-4 mb-3">
                <img src="{{ url_for('static', filename=product.image_main) }}" alt="{{ product.name }} main image" class="img-fluid rounded shadow-sm">
            </div>
        {% endif %}
        {% if product.image_1 %}
            <div class="col-md-4 mb-3">
                <img src="{{ url_for('static', filename=product.image_1) }}" alt="Additional image 1 of {{ product.name }}" class="img-fluid rounded shadow-sm">
            </div>
        {% endif %}
        {% if product.image_2 %}
            <div class="col-md-4 mb-3">
                <img src="{{ url_for('static', filename=product.image_2) }}" alt="Additional image 2 of {{ product.name }}" class="img-fluid rounded shadow-sm">
            </div>
        {% endif %}
    </div>
    <div class="row">
        <div class="col-md-8">
            <ul class="list-group mb-4">
                <li class="list-group-item"><strong>Description:</strong> {{ product.description }}</li>
                <li class="list-group-item"><strong>SKU:</strong> {{ product.sku }}</li>
                <li class="list-group-item"><strong>Price:</strong> â‚¬{{ "%.2f"|format(product.price) }}</li>
                <li class="list-group-item"><strong>Size:</strong> {{ product.size or "N/A" }}</li>
                <li class="list-group-item"><strong>Category:</strong> {{ product.category or "Uncategorized" }}</li>
                <li class="list-group-item"><strong>Ingredients:</strong> {{ product.ingredients or "Not listed" }}</li>
                <li class="list-group-item"><strong>Featured:</strong> {{ "Yes" if product.featured else "No" }}</li>
                <li class="list-group-item"><strong>In Stock:</strong> {{ "Yes" if product.in_stock else "No" }}</li>
                <li class="list-group-item"><strong>Packs Per Box:</strong> {{ product.packs_per_box }}</li>
                <li class="list-group-item"><strong>Created At:</strong> {{ product.created_at.strftime("%Y-%m-%d %H:%M") }}</li>
                <li class="list-group-item"><strong>Updated At:</strong> {{ product.updated_at.strftime("%Y-%m-%d %H:%M") }}</li>
            </ul>
            <h2>Stock Batches</h2>
            <ul class="list-group mb-4">
                <li class="list-group-item"><strong>Total Quantity: {{ product.batches | map(attribute='stock_quantity') | sum }}</strong></li>
                {% for batch in batches %}
                    <li class="list-group-item"><strong>Batch Quantity:</strong> {{ batch.stock_quantity}}</li>
                    <li class="list-group-item"><strong>Batch Location:</strong> {{ batch.stock_location }}</li>
                    <li class="list-group-item"><strong>Batch Expiry Date:</strong> {{ batch.expiry_date }}</li>
                {% endfor %}
            </ul>
            <a href="{{ url_for('admin.edit_product', product_sku=product.sku) }}" class="btn btn-warning">
                Edit Product
            </a>
        </div>
    </div>
</div>
{% endblock %}
